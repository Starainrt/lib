!function(e){function t(o){if(n[o])return n[o].exports;var a=n[o]={i:o,l:!1,exports:{}};return e[o].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var n={};t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=4)}([function(e,t){},,function(e,t,n){e.exports=n.p+"./font/zhanku.ttf"},,function(e,t,n){function o(e){return document.querySelector(e)}n(0),n(2);var a={init:function(){this.initPage(),this.loadImg(),this.userData(),this.music()},initPage:function(){var e=this;e.setPageSize();new Swiper(".swiper-container",{speed:400,direction:"vertical",pagination:".swiper-pagination",onSlideChangeStart:function(t){t.activeIndex,t.slides.length,e.convertArray(document.querySelectorAll(".font-abc")).forEach(function(e){e.style.display="none"}),t.slides[t.activeIndex].querySelector(".font-abc")&&(t.slides[t.activeIndex].querySelector(".font-abc").style.display="block"),t.activeIndex,t.activeIndex,5==t.activeIndex&&e.convertArray(document.querySelectorAll(".xuexiao4 img")).forEach(function(e){e.style.display="block"}),5!=t.activeIndex&&e.convertArray(document.querySelectorAll(".xuexiao4 img")).forEach(function(e){e.style.display="none"})}});console.log("初始化页面成功")},setPageSize:function(){var e=this,t=document.documentElement.clientWidth,n=document.documentElement.clientHeight,o=document.querySelectorAll(".swiper-content");e.convertArray(o).forEach(function(e){e.style.width="750px",e.style.height="1334px",e.style.position="absolute",e.style.top="50%",e.style.left="50%";var o=t/750,a=n/1334;e.style.transformOrigin="0 0",e.style.transform="scale("+o+","+a+")translate(-50%, -50%)"})},loadImg:function(){for(var e=["bg1_welcome.png","bg2_firsttime.png","bg3_firstbook.png","bg4_total.png","bg6_interest.png","bg7_lastbook.png","bg8_final.png"],t=o(".slide1"),n=o(".loading-content"),a=o(".progress"),i=o(".swiper-pagination-bullets"),r=0,s=e.length,c=0;c<s;c++){var l=new Image;l.src="http://source.igdut.cn/"+e[c],l.onload=function(){r++,a.innerHTML=Math.floor(r/s*100)+"%",r==s&&(console.log("所有图片预加载成功"),setTimeout(function(){n.style.display="none",i.style.display="block",t.setAttribute("class",t.getAttribute("class").replace(" swiper-no-swiping",""))},1e3))},l.onerror=function(){console.log("Failed to load the image"),setTimeout(function(){n.style.display="none",i.style.display="block",t.setAttribute("class",t.getAttribute("class").replace(" swiper-no-swiping",""))},1e3)}}},userData:function(){var e=this;e.ajax("POST","cmd=getinfo","./easy.php",function(n){switch(n.code){case 0:e.showModal("未能获取到信息，请返回重新登录。"),console.log("获取失败(未登录等原因)"+n.code+n.msg);break;case 1:console.log("获取信息成功"),t(n.msg);break;default:e.showModal("B1:出错啦~请稍后登录呗~"),console.log("遇到未知错误--"+n.code+n.msg)}});var t=function(e){n(e)},n=function(e){var t=function(e){var t=e.split("-");return"<span>"+t[0]+"</span>年<span>"+t[1]+"</span>月<span>"+t[2]+"</span>日"};o(".data1").innerHTML=e.name,o(".data2").innerHTML=t(e.entertime),o(".data3").innerHTML=t(e.firstbooktime),o(".data4").innerHTML=e.gap,o(".data5").innerHTML="《"+e.firstbook+"》",o(".data6").innerHTML=e.grade,o(".data7").innerHTML=e.bookcount,o(".data8").innerHTML=Math.round(100*+e.rankingrade)+"%",o(".data9").innerHTML=function(e){return e>=80?"“工大学霸”":e>=30?"“热情读者”":'"最具潜力读者"'}(e.bookcount),o(".data10").innerHTML=function(e){for(var t=e.length,n=Math.ceil(t/10),o=1;o<=n;o++)for(;t>0;)t--;new Swiper(".borrowlist-container",{direction:"horizontal",slidesPerView:"auto",centeredSlides:!0,spaceBetween:15})}(e.books),o(".data11").innerHTML=e.favorite.split(",")[0],o(".data12").innerHTML=e.bookcount,o(".data13").innerHTML=e.favorite.split(",")[1],o(".data14").innerHTML=function(e){var t=e.split("-");return"在<span>"+t[0]+"</span>年的<span>"+t[1]+"</span>月<span>"+t[2]+"</span>日"}(e.lastbooktime),o(".data15").innerHTML="《"+e.lastbook+"》"}},music:function(){},convertArray:function(e){return Array.prototype.slice.call(e,0)},showModal:function(e){return window.alert(e)},ajax:function(e,t,n,o){var a=this,e=e||"GET",t=t||null,n=n||"",i=new XMLHttpRequest;i.onreadystatechange=function(){if(4==i.readyState)if(i.status>=200&&i.status<300||304==i.status){var e=JSON.parse(i.responseText);o&&o(e)}else a.showModal("A2:出错啦~请稍后登录呗~"),console.log("There was a problem with the request--status code:"+i.status),location.reload()},i.onerror=function(e){a.showModal("A3:出错啦~请稍后登录呗~"),console.log(e),location.reload()},i.open(e,n,!0),"POST"==e&&i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.send(t)}};document.addEventListener("DOMContentLoaded",function(e){a.init()})}]);