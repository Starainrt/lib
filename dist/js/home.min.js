!function(t){function e(o){if(n[o])return n[o].exports;var a=n[o]={i:o,l:!1,exports:{}};return t[o].call(a.exports,a,a.exports,e),a.l=!0,a.exports}var n={};e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,o){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=4)}([function(t,e){},,function(t,e,n){t.exports=n.p+"./font/zhanku.ttf"},,function(t,e,n){function o(t){return document.querySelector(t)}n(0),n(2);var a={init:function(){this.initPage(),this.loadImg(),this.userData(),this.music()},initPage:function(){var t=this;t.setPageSize();new Swiper(".swiper-container",{speed:400,direction:"vertical",onSlideChangeStart:function(e){e.activeIndex,e.slides.length,t.convertArray(document.querySelectorAll(".font-abc")).forEach(function(t){t.style.display="none"}),e.slides[e.activeIndex].querySelector(".font-abc")&&(e.slides[e.activeIndex].querySelector(".font-abc").style.display="block"),e.activeIndex,e.activeIndex,4==e.activeIndex&&t.convertArray(o(".borrowlist-container").querySelectorAll(".font-abc")).forEach(function(t){t.style.display="block"}),4!=e.activeIndex&&t.convertArray(o(".borrowlist-container").querySelectorAll(".font-abc")).forEach(function(t){t.style.display="none"})}});console.log("初始化页面成功")},setPageSize:function(){var t=this,e=document.documentElement.clientWidth,n=document.documentElement.clientHeight,o=document.querySelectorAll(".swiper-content");t.convertArray(o).forEach(function(t){t.style.width="750px",t.style.height="1334px",t.style.position="absolute",t.style.top="50%",t.style.left="50%";var o=e/750,a=n/1334;t.style.transformOrigin="0 0",t.style.transform="scale("+o+","+a+")translate(-50%, -50%)"})},loadImg:function(){for(var t=this,e=["bg1_welcome.png","bg2_firsttime.png","bg3_firstbook.png","bg4_total.png","bg6_interest.png","bg7_lastbook.png","bg8_final.png"],n=o(".progress"),a=0,i=e.length,r=0;r<i;r++){var s=new Image;s.src="http://source.igdut.cn/"+e[r],s.onload=function(){a++,n.innerHTML=Math.floor(a/i*100)+"%",a==i&&(console.log("所有图片预加载成功"),t.showPage())},s.onerror=function(){console.log("图片并未成功加载"),t.showPage()}}},userData:function(){var t=this;t.ajax("POST","cmd=getinfo","./easy.php",function(n){switch(n.code){case 0:t.showModal("未能获取到信息，请返回重新登录。"),console.log("获取失败(未登录等原因)"+n.code+n.msg),window.location.pathname="./index.html";break;case 1:console.log("获取信息成功"),e(n.msg);break;default:t.showModal("B1:出错啦~请稍后登录呗~"),console.log("遇到未知错误--"+n.code+n.msg)}});var e=function(t){n(t)},n=function(t){var e=function(t){var e=t.split("-");return"<span>"+e[0]+"</span>年<span>"+e[1]+"</span>月<span>"+e[2]+"</span>日"};o(".data1").innerHTML=t.name,o(".data2").innerHTML=e(t.entertime),o(".data3").innerHTML=e(t.firstbooktime),o(".data4").innerHTML=t.gap,o(".data5").innerHTML="《"+t.firstbook+"》",o(".data6").innerHTML=t.grade,o(".data7").innerHTML=t.bookcount,o(".data8").innerHTML=Math.round(100*+t.rankingrade)+"%",o(".data9").innerHTML=function(t){return t>=80?"“工大学霸”":t>=30?"“热情读者”":'"最具潜力读者"'}(t.bookcount),function(t){for(var e="",n=Math.ceil(t.length/10),a=1;a<=n;a++){var i=10*(a-1)+1;if(e+="<div class='swiper-slide h-slide h-slide"+a+"'><ul class='font-abc font-borrowlist-books'>",a!=n)for(var r=0;r<10;r++)e+="<li>"+(i+r)+".《"+t.shift()+"》</li>";if(a==n)for(var r=0;t.length>0;)e+="<li>"+(i+r)+".《"+t.shift()+"》</li>",r++;e+="</ul><div class='h-bottom-style'></div></div>"}o(".data10").innerHTML=e;new Swiper(".borrowlist-container",{direction:"horizontal",slidesPerView:"auto",centeredSlides:!0,spaceBetween:25})}(t.books),o(".data11").innerHTML=t.favorite.split(",")[0],o(".data12").innerHTML=t.bookcount,o(".data13").innerHTML=t.favorite.split(",")[1],o(".data14").innerHTML=function(t){var e=t.split("-");return"在<span>"+e[0]+"</span>年的<span>"+e[1]+"</span>月<span>"+e[2]+"</span>日"}(t.lastbooktime),o(".data15").innerHTML="《"+t.lastbook+"》"}},showPage:function(){var t=o(".slide1"),e=o(".loading-content"),n=o(".music");setTimeout(function(){e.style.display="none",n.style.display="block",t.setAttribute("class",t.getAttribute("class").replace(" swiper-no-swiping",""))},1e3)},music:function(){var t=this,e=o(".music"),n=o(".audio"),a=!0;e.addEventListener("touchstart",function(){a?(e.setAttribute("class","music music-play"),n.play()):(e.setAttribute("class","music"),n.pause()),a=!a}),t.triggerEvent(e,"touchstart")},triggerEvent:function(t,e){var n=document.createEvent("HTMLEvents");return n.eventName=e,n.initEvent(e,!0,!0),!t.dispatchEvent(n)},convertArray:function(t){return Array.prototype.slice.call(t,0)},showModal:function(t){return window.alert(t)},ajax:function(t,e,n,o){var a=this,t=t||"GET",e=e||null,n=n||"",i=new XMLHttpRequest;i.onreadystatechange=function(){if(4==i.readyState)if(i.status>=200&&i.status<300||304==i.status){var t=JSON.parse(i.responseText);o&&o(t)}else a.showModal("A2:出错啦~请稍后登录呗~"),console.log("There was a problem with the request--status code:"+i.status),location.reload()},i.onerror=function(t){a.showModal("A3:出错啦~请稍后登录呗~"),console.log(t),location.reload()},i.open(t,n,!0),"POST"==t&&i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.send(e)}};document.addEventListener("DOMContentLoaded",function(t){a.init()})}]);